<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test Básico Autovalidado</title>
</head>
<body>
  <h1>Ejecutando Test Básico</h1>
  <pre id="resultado"></pre>

  <script>
    function runTests() {
      const resultados = [];

      // Test 1: verificar 1 + 1 = 2
      try {
        if (1 + 1 === 2) {
          resultados.push("✔ Test 1: 1 + 1 = 2 (OK)");
        } else {
          resultados.push("✘ Test 1: 1 + 1 no es 2 (FAIL)");
        }
      } catch (e) {
        resultados.push("✘ Test 1 lanzó error: " + e.message);
      }

      // Test 2: simular un GET a "/"
      // En HTML puro no existe "self.client.get", así que usamos fetch
      return fetch("/")
        .then(response => {
          if (response.status === 200) {
            resultados.push("✔ Test 2: '/' responde con 200 (OK)");
          } else {
            resultados.push("✘ Test 2: '/' responde con " + response.status + " (FAIL)");
          }
        })
        .catch(error => {
          resultados.push("✘ Test 2: error al hacer GET '/': " + error.message);
        })
        .finally(() => {
          document.getElementById("resultado").textContent = resultados.join("\n");
          // si quieres que falle el workflow en CI/CD, puedes usar console.error
          if (resultados.some(r => r.includes("✘"))) {
            console.error("Algunos tests fallaron");
          } else {
            console.log("Todos los tests pasaron");
          }
        });
    }

    runTests();
  </script>
</body>
</html>
